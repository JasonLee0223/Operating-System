# Process Management - 1

## 프로세스 생성(Process Creation)

✅ 부모 프로세스(Parent process)가 자식 프로세스(children process) 생성

✅ 프로세스의 트리(계층 구조) 형성

✅ 프로세스는 자원을 필요로 함
- 운영체제로부터 받는다.
- 부모와 공유한다.

✅ 자원의 공유
- 부모와 자식이 모든 자원을 공유하는 모델
- 일부를 공유하는 모델
- 전혀 공유하지 않는 모델

✅ 수행 (Execution)
- 부모와 자식은 공존하며 수행되는 모델
- 자식이 종료(terminate)될 떄까지 부모가 기다리는(wait) 모델

> Q) 누가 프로세스를 만드느냐??   
> A) 복제 생성을 한다.
> 부모 프로세스 하나가 N 개의 자식 프로세스를 만들어진다.   
> 하여 트리 구조를 형성하게된다. (족보가 생성된다)

> 자원은 운영체제(OS)로부터 받게 되고 공유되는 케이스는 여러개로 나뉘어진다.
> 프로세스가 실행될 때 부모와 공존하며 수행될 때도 있고 자식이 종료 될때까지 기다리는 모델도 있다.

✅ 주소 공간 (Address space)
- 자식은 부모의 주소 공간을 복사함 (binary and OS data)
- 자식은 그 복제한 공간에 새로운 프로그램을 올림 (서로 다른 프로그램이 존재할 수 있는 이유가 된다.)

✅ UNIX의 예시
- `fork()` 시스템 콜(system call)이 새로운 프로세스를 생성
  - 부모를 그대로 복사 (OS data except PID + binary)
  - 주소 공간 할당
- fork 다음에 이어지는 `exec()` 시스템 콜을 통해 새로운 프로그램을 메모리에 올림

---

## 프로세스 종료 (Process Termination)

✅ 프로세스가 마지막 명령을 수행한 후 운영체제에게 이를 알려준다. (`exit`)
- 자식이 부모에게 output data를 보냄 (via `wait)`.
- 프로세스의 각종 자원들이 운영체제에게 반납됨

> exit system call을 하면 프로세스가 종료된다.   
> 프로세스가 종료될 때는 자식이 부모한테 데이터를 보내게된다.   
> 프로세스 세계에서는 원칙 중 하나가 자식이 먼저 죽고 부모가 항상 자식의 데이터를 수행하고 종료된다.

✅ 부모 프로세스가 자식의 수행을 종료시킴 (`abort`)
- 자식이 할당 자원의 한계치를 넘어섬
- 자식에게 할당된 Task가 더 이상 필요하지 않음
- 부모가 종료(exit)하는 경우
  - 운영체제는 부모 프로세스가 종료하는 경우 자식이 더 이상 수행되도록 두지 않는다.
  - 단계적인 종료

> 자발적으로 스스로 프로세스가 `exit` 시스템콜을 사용하며 비자발적으로 프로세스가 종료되는 경우를 `abort`라고 한다.   
> 자원의 할당치를 넘어서는 요청을 하게되면 비자발적으로 종료될 수 있다.   
> 자식 프로세스에게 더이상 시킬 일이 없다면 부모프로세스가 종료시킬 수 있으며   
> 부모 프로세스가 종료되는 경우